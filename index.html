<!DOCTYPE html>
<html lang="de" class="light-mode">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Bflügel – Willkommen</title>
  <style>
    /* Basis-Variablen */
    :root {
      --header-height: 60px;
      --accent1: #7CC576;
      --accent2: #56876D;
      --accent3: #2F4F2F;
      --transition-fast: 0.3s;
    }
    /* Light/Dark Mode */
    :root.light-mode {
      --bg: #ffffff;
      --header-bg: rgba(255,255,255,0.8);
      --card-bg: rgba(255,255,255,0.4);
      --card-border: rgba(0,0,0,0.1);
      --text: #222222;
    }
    :root.dark-mode {
      --bg: #2E2E2E;
      --header-bg: rgba(46,46,46,0.8);
      --card-bg: rgba(50,50,50,0.4);
      --card-border: rgba(255,255,255,0.1);
      --text: #EEEEEE;
      --accent1: #A8E06E;
      --accent2: #7CB97E;
      --accent3: #4A6C4A;
    }

    /* Reset & Basis */
    * { box-sizing: border-box; }
    html, body {
      margin: 0; padding: 0;
      overflow-x: hidden;
      scroll-behavior: smooth;
      scroll-snap-type: y mandatory;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: background var(--transition-fast), color var(--transition-fast);
    }

    /* Header */
    header.navbar {
      position: fixed; top: 0; left: 0; right: 0;
      height: var(--header-height);
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 1rem;
      background: var(--header-bg);
      backdrop-filter: blur(10px) saturate(180%);
      z-index: 1000;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .logo { font-size: 1.25rem; font-weight: bold; color: var(--accent3); }
    nav { display: flex; gap: 1rem; }
    nav a {
      text-decoration: none; color: var(--text);
      transition: color var(--transition-fast);
    }
    nav a:hover { color: var(--accent2); }
    #theme-toggle {
      background: none; border: none; font-size: 1.25rem;
      cursor: pointer; color: var(--text);
    }

    /* Sections */
    section {
      scroll-snap-align: start;
      scroll-margin-top: var(--header-height);
    }

    /* Hero */
    .hero {
      width: 100%; height: calc(100vh - var(--header-height));
      margin-top: var(--header-height);
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      text-align: center;
      background: linear-gradient(135deg, var(--accent1), var(--accent2));
      color: #fff; padding: 0 1rem;
    }
    .hero h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
    .hero p { font-size: 1.125rem; margin-bottom: 1.5rem; max-width: 600px; }
    .hero .btn-group {
      display: flex; flex-direction: column; gap: 1rem;
      width: 100%; max-width: 300px;
    }

    /* Buttons */
    .btn {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      font-weight: bold;
      text-decoration: none;
      text-align: center;
      transition: background var(--transition-fast), color var(--transition-fast), box-shadow var(--transition-fast);
      cursor: pointer;
      border-radius: 4px;
    }
    .btn.primary {
      background: var(--accent3); color: #fff; border: none;
      box-shadow: 0 0 10px var(--accent1);
    }
    .btn.primary:hover {
      box-shadow: 0 0 20px var(--accent1);
    }
    .btn.secondary {
      background: transparent;
      border: 2px solid var(--accent3);
      color: var(--accent3);
    }
    .btn.secondary:hover {
      background: var(--accent3);
      color: #fff;
    }

    /* Cards Grid */
    .cards {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
      padding: 3rem 1rem;
      justify-items: center;
    }
    @media (min-width: 900px) {
      .cards { grid-template-columns: repeat(2,1fr); padding: 3rem 2rem; }
    }
    .card {
      width: 100%; max-width: 600px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 12px;
      backdrop-filter: blur(10px) saturate(180%);
      padding: 1.5rem;
      opacity: 0; transform: translateX(var(--translate-x));
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      transition: transform 0.6s ease-out, opacity 0.6s ease-out, box-shadow 0.5s ease-out;
    }
    .card.in { opacity: 1; transform: translateX(0); }
    .card.glow {
      box-shadow: 0 8px 16px rgba(0,0,0,0.1), 0 0 20px var(--accent1);
    }
    .card.from-left  { --translate-x: -100%; }
    .card.from-right { --translate-x:  100%; }
    .card h2 { margin-bottom: 0.75rem; color: var(--accent3); }
    .card p  { margin-bottom: 1rem; }
    .card .btn-group {
      display: flex; gap: 1rem; flex-wrap: wrap;
    }

    /* Footer */
    .footer {
      background: var(--header-bg);
      backdrop-filter: blur(10px) saturate(180%);
      padding: 1.5rem 1rem;
      text-align: center;
      border-top: 1px solid rgba(0,0,0,0.1);
    }
    .footer nav {
      display: flex; justify-content: center; gap: 1rem; margin-bottom: 0.5rem;
    }
    .footer a {
      text-decoration: none; color: var(--text);
      transition: color var(--transition-fast);
    }
    .footer a:hover { color: var(--accent2); }

    /* Modal */
    .modal {
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      display: flex; align-items: center; justify-content: center;
      background: rgba(0,0,0,0.5);
      opacity: 0; pointer-events: none;
      transition: opacity 0.25s ease;
      z-index: 2000;
    }
    .modal.show {
      opacity: 1; pointer-events: all;
    }
    .modal-content {
      background: var(--bg);
      color: var(--text);
      padding: 2rem;
      border-radius: 8px;
      text-align: center;
      max-width: 90%; width: 300px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .modal-content h2 { margin-top: 0; color: var(--accent3); }
    .modal-content button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      border: none; border-radius: 4px;
      background: var(--accent3); color: #fff;
      cursor: pointer;
    }
  </style>
</head>
<body class="light-mode">

  <!-- Header -->
  <header class="navbar">
    <div class="logo">BFLG</div>
    <nav id="header-nav"></nav>
    <button id="theme-toggle" aria-label="Theme umschalten">🌙</button>
  </header>

  <!-- Hero -->
  <section class="hero" id="hero"></section>

  <!-- Cards -->
  <section class="cards" id="cards"></section>

  <!-- Footer -->
  <footer class="footer">
    <nav id="footer-nav"></nav>
    <div id="copyright"></div>
  </footer>

  <!-- Coming Soon Modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <h2>Coming Soon</h2>
      <p>Diese Funktion ist in Kürze verfügbar.</p>
      <button id="close-modal">Schließen</button>
    </div>
  </div>

  <script>
    // Theme Toggle
    const root = document.documentElement;
    const toggle = document.getElementById('theme-toggle');
    const stored = localStorage.getItem('theme');
    if (stored === 'dark') {
      root.classList.replace('light-mode', 'dark-mode');
      toggle.textContent = '☀️';
    }
    toggle.addEventListener('click', () => {
      const isDark = root.classList.toggle('dark-mode');
      root.classList.toggle('light-mode');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      toggle.textContent = isDark ? '☀️' : '🌙';
    });

    // Load content.json
    fetch('posts.json')
      .then(res => res.json())
      .then(data => {
        const h = data.home;

        // Header
        const hnav = document.getElementById('header-nav');
        Object.values(h.header.nav).forEach(b => {
          const a = document.createElement('a');
          a.textContent = b.label;
          a.href = b.link;
          hnav.append(a);
        });

        // Hero
        const hero = document.getElementById('hero');
        hero.innerHTML = `
          <h1>${h.hero.title}</h1>
          <p>${h.hero.content}</p>
          <div class="btn-group hero-btn-group">
            <a class="btn primary" href="${h.hero.btn1.link}">${h.hero.btn1.label}</a>
            <a class="btn secondary" href="${h.hero.btn2.link}">${h.hero.btn2.label}</a>
          </div>
        `;

        // Cards
        const cardsEl = document.getElementById('cards');
        Object.values(h.cards).forEach((c, i) => {
          const div = document.createElement('div');
          div.className = 'card ' + (i % 2 === 0 ? 'from-left' : 'from-right');
          div.innerHTML = `
            <h2>${c.title}</h2>
            <p>${c.content}</p>
            <div class="btn-group">
              <a class="btn primary" href="${c.btn1.link}">${c.btn1.label}</a>
              <a class="btn secondary" href="${c.btn2.link}">${c.btn2.label}</a>
            </div>
          `;
          cardsEl.append(div);
        });

        // Footer
        const fnav = document.getElementById('footer-nav');
        Object.values(h.footer.nav).forEach(b => {
          const a = document.createElement('a');
          a.textContent = b.label;
          a.href = b.link;
          fnav.append(a);
        });
        document.getElementById('copyright').textContent = h.footer.copyright;

        // Scroll & glow logic
        const cards = document.querySelectorAll('.card');
        cards.forEach(c => { c._in = false; c._gt = c._ot = null; });

        const inView = (r, vh) => r.bottom > vh * 0.2 && r.top < vh * 0.8;

        function onScroll() {
          const vh = window.innerHeight;
          cards.forEach(c => {
            const r = c.getBoundingClientRect();
            const now = inView(r, vh);
            if (now && !c._in) {
              clearTimeout(c._ot);
              c._in = true; c.classList.add('in');
              c._gt = setTimeout(() => c.classList.add('glow'), 250);
            } else if (!now && c._in) {
              clearTimeout(c._gt);
              c.classList.remove('glow');
              c._ot = setTimeout(() => {
                c._in = false; c.classList.remove('in');
              }, 250);
            }
          });
        }
        window.addEventListener('scroll', onScroll);
        window.addEventListener('resize', onScroll);
        onScroll();

        // Coming soon modal
        const modal = document.getElementById('modal');
        const closeBtn = document.getElementById('close-modal');
        function showModal(e) {
          e.preventDefault();
          modal.classList.add('show');
        }
        document.body.addEventListener('click', e => {
          if (e.target.matches('a.btn, nav a')) showModal(e);
        });
        closeBtn.addEventListener('click', () => {
          modal.classList.remove('show');
        });
      });
  </script>
</body>
</html>